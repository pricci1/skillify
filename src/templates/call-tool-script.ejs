#!/usr/bin/env node
import { connectToMCP } from "./mcp-client.js";

const TARGET = "<%= target %>";

const [toolName, argsJson] = process.argv.slice(2);
if (!toolName) {
  console.error("Usage: call-tool.js <tool-name> [args-json]");
  process.exit(1);
}

const args = argsJson ? JSON.parse(argsJson) : {};
const { client, close } = await connectToMCP(TARGET);

try {
  const result = await client.callTool({ name: toolName, arguments: args });
  console.log(JSON.stringify(result, null, 2));
} finally {
  await close();
}
